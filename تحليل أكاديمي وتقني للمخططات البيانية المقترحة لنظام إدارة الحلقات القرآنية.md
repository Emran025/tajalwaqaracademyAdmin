# تحليل أكاديمي وتقني للمخططات البيانية المقترحة لنظام إدارة الحلقات القرآنية

## مقدمة ومنهجية التحليل

يهدف هذا التقرير إلى تقديم تحليل أكاديمي وتقني معمق للمخططات البيانية المقترحة لنظام إدارة الحلقات القرآنية، مع التركيز على الجوانب الفنية المتعلقة بمصادر البيانات (قاعدة البيانات المحلية `SQLite` وقاعدة البيانات المركزية على الخادم)، والمعايير الإحصائية، والقيمة التحليلية لكل مخطط. تعتمد المخططات المقترحة على نموذج بيانات مصمم لـ "أولوية العمل دون اتصال" (`offline-first`) مع آلية مزامنة، كما يتضح من وجود جداول مثل `sync_metadata` و `pending_operations` في قاعدة البيانات المحلية.

## نظرة عامة على نموذج البيانات ومصادرها

تستند المخططات إلى دمج البيانات من الجداول الرئيسية التالية، والتي تمثل الكيانات الأساسية في النظام:

| الكيان                  | الجداول المحلية (stru.md)                                                        | الجداول المركزية (Prompt)                                                       | الغرض التحليلي                                                         |
| :---------------------- | :------------------------------------------------------------------------------- | :------------------------------------------------------------------------------ | :--------------------------------------------------------------------- |
| **المستخدمون والأدوار** | `users`, `roles`                                                                 | `users`, `roles`, `students`, `teachers`, `guardians`                           | تحديد الهوية، الدور، وتصنيف البيانات (طالب/معلم/مشرف).                 |
| **الحلقات والخطط**      | `halqas`, `teacher_halqas`, `halqa_students`, `follow_up_plans`, `plan_details`  | `halaqahs`, `halaqah_teachers`, `plans`                                         | هيكلة البيانات حسب الحلقات وتحديد الأهداف التعليمية.                   |
| **التتبع والتقييم**     | `daily_tracking`, `daily_tracking_detail`, `mistakes`, `tracking_types`, `units` | `trackings`, `tracking_details`, `mistakes`, `tracking_types`, `tracking_units` | قياس الأداء اليومي، رصد الأخطاء، وتحديد وحدات القياس (جزء، حزب، صفحة). |

---

## أولاً: مخططات الأداء على مستوى الطالب (Student-Level Performance Charts)

تُعد هذه المخططات أدوات أساسية لتقييم الأداء الفردي للطالب، وتعتمد بشكل رئيسي على بيانات التتبع اليومي والأخطاء المسجلة.

### 1. مخطط تحليل الأخطاء (Error Analysis Chart)

- **نوع المخطط:** مخطط أعمدة (Bar Chart).
- **المحور السيني (X-Axis):** يمثل **أنواع الأخطاء** (Error Categories). يتم استخلاص هذه الأنواع من جدول `mistakes` (سواء المحلي أو المركزي)، حيث يُفترض أن هذا الجدول يحتوي على تصنيف للأخطاء (مثل: خطأ في التجويد، خطأ في الوقف والابتداء، خطأ في النسيان، إلخ). يجب أن يتم تقسيم المدى السيني بالتساوي على عدد أنواع الأخطاء المتاحة.
- **المحور الصادي (Y-Axis):** يمثل **العدد التكراري** (Frequency Count) لكل نوع من الأخطاء.
- **القيمة التحليلية:** يوفر هذا المخطط **تشخيصاً كمياً** لنقاط الضعف النوعية لدى الطالب. من خلال تحديد أنواع الأخطاء الأكثر تكراراً، يمكن للمعلم صياغة خطط علاجية مستهدفة.
- **المعايير القابلة للتعديل (Filters/Dimensions):**
  - **البعد الزمني:** يمكن تصفية البيانات حسب فترات زمنية مختلفة (شهر، ربع سنة، سنة، أسبوع). القيمة الافتراضية هي **شهر**.
  - **البعد الكمي (مدى الحفظ):** يمكن تصفية البيانات حسب نطاق الحفظ (جزء، حزب، المصحف كاملاً). القيمة الافتراضية هي **جزء**.
  - **نوع المسار:** يمكن التصفية حسب نوع النشاط (حفظ، سرد، مراجعة) باستخدام جدول `tracking_types`.

### 2. مخطط التقدم مقابل الخطة (Progress vs. Plan Chart)

- **نوع المخطط:** مخطط خطي نبضي (Linear Pulse Chart / Line Chart).
- **الخطوط الممثلة:**
  - **الخط الأخضر (الخطة المقررة):** يمثل **التقدم التراكمي المستهدف** للحفظ أو المراجعة أو السرد، كما هو محدد في جدولي `follow_up_plans` و `plan_details`.
  - **الخط الأزرق (التنفيذ الفعلي):** يمثل **التقدم التراكمي الفعلي** للطالب، كما هو مسجل في جدول `daily_tracking` و `daily_tracking_detail`.
- **المحور السيني (X-Axis):** يمثل **الفترة الزمنية** (Time Series)، قابلة للتحريك بين ترقيم الأشهر، السنوات، أو الأسابيع.
- **المحور الصادي (Y-Axis):** يمثل **الكمية المقررة/المنفذة** (Quantity/Volume)، ويتم قياسها بوحدات قابلة للتعديل (صفحة، حزب، جزء) استناداً إلى جدول `units`. يتميز هذا المخطط بآلية **تكييف ديناميكي لوحدة القياس**؛ حيث يبدأ القياس من الصفر ويتم تحويل الوحدة (من صفحة إلى حزب إلى جزء) بناءً على الحجم التراكمي للتقدم، لضمان وضوح التمثيل البياني.
- **القيمة التحليلية:** يقدم هذا المخطط **تحليلاً للانحراف** (`Variance Analysis`) بين الأداء المخطط له والأداء الفعلي. تُشير الفجوة بين الخطين إلى مدى التزام الطالب بالخطة، مما يسهل على المعلم والمشرف اتخاذ إجراءات تصحيحية مبكرة.

### 3. مخطط تقييم جودة الإتقان (Mastery Quality Assessment Chart)

- **نوع المخطط:** مخطط خطي نبضي (Linear Pulse Chart / Line Chart).
- **المحور الصادي (Y-Axis):** يمثل **درجة التقييم** (Assessment Score)، وتكون في مدى من 0 إلى 100. تُستمد هذه الدرجة من تقييم المعلم المسجل في جدول `daily_tracking` أو `tracking_details`.
- **المحور السيني (X-Axis):** يمثل **المعيار المحدد للتقييم**، وهو إما:
  - **الفترة الزمنية:** (شهر، ربع سنة، سنة، أسبوع).
  - **المقدار الكمي:** (جزء، حزب). القيمة الافتراضية هي **جزء**.
- **القيمة التحليلية:** يقيس هذا المخطط **الاتجاه النوعي** لجودة أداء الطالب بمرور الوقت أو عبر مقادير الحفظ. يهدف إلى رصد استمرارية الإتقان وتحديد ما إذا كانت الجودة تتدهور أو تتحسن مع زيادة الكمية المحفوظة.

### 4. مخطط تقييم الأداء العام المركب (Composite General Performance Chart)

- **نوع المخطط:** مخطط خطي نبضي (Linear Pulse Chart / Line Chart).
- **المحور الصادي (Y-Axis):** يمثل **مؤشر الأداء العام المركب** (Composite Performance Index)، ويتم إعادة تقييسه ليكون في مدى من 0 إلى 100.
- **المحور السيني (X-Axis):** يمثل **الفترة الزمنية** أو **المقدار الكمي** (جزء/حزب)، وهو قابل للتحريك.
- **منهجية التركيب (Composite Methodology):** هذا المخطط هو الأكثر تعقيداً، حيث يتطلب **نموذجاً رياضياً مرجحاً** لدمج ثلاثة أبعاد رئيسية:
  1.  **جودة الحفظ/الإتقان:** (مستمدة من المخطط 3).
  2.  **الالتزام بالخطة:** (مستمدة من تحليل الانحراف في المخطط 2).
  3.  **السلوك في الجلسات:** (يُفترض وجود حقل تقييم سلوكي في جدول `daily_tracking` أو جدول مخصص للملاحظات مثل `halaqah_notes`).
- **القيمة التحليلية:** يوفر هذا المخطط **مؤشراً كلياً وموحداً** لأداء الطالب، مما يسهل على الإدارة والمشرفين اتخاذ قرارات شاملة بخصوص الطالب (مثل التكريم، أو الحاجة إلى دعم إضافي). يتطلب هذا المخطط تعريف **أوزان ترجيحية** لكل بُعد من الأبعاد الثلاثة لضمان الموضوعية والشفافية في التقييم المركب.

---

## ثانياً: مخططات الأداء على مستوى الحلقة (Halqa-Level Performance Charts)

تعتمد هذه المخططات على تجميع وتحليل متوسطات أداء الطلاب داخل الحلقة الواحدة، بالإضافة إلى تقييم أداء المعلم.

### 5. مخططات الأداء المجمعة للحلقة (Aggregated Performance Charts)

- **المخططات (2، 3، 4):** يتم تطبيق نفس المنهجية التحليلية للمخططات (2، 3، 4) الخاصة بالطالب، ولكن يتم استبدال البيانات الفردية بـ **المتوسط الحسابي** (`Arithmetic Mean`) لأداء جميع الطلاب المسجلين في الحلقة (جدول `halqa_students`).
- **القيمة التحليلية:** تتيح هذه المتوسطات **قياس كفاءة الحلقة** ككل ومقارنتها بالحلقات الأخرى، وتحديد ما إذا كانت هناك تحديات منهجية أو تعليمية تؤثر على الأداء الجماعي.

### 6. مخطط التزام ونشاط المعلم (Teacher Commitment and Activity Chart)

- **نوع المخطط:** مخطط خطي نبضي (Linear Pulse Chart / Line Chart).
- **المحور الصادي (Y-Axis):** يمثل **مدى الالتزام** (Commitment Index)، ويُقاس بنسبة مئوية من 0 إلى 100.
- **المحور السيني (X-Axis):** يمثل **الفترة الزمنية** (شهر أو سنة).
- **منهجية القياس:** يتم بناء هذا المؤشر المركب على بعدين رئيسيين:
  1.  **الالتزام الإجرائي (Procedural Commitment):** يُقاس بمدى رفع التقارير اليومية (جدول `daily_tracking`) في مواعيدها المقررة. يتم حساب **نسبة التأخير أو الغياب** في إدخال البيانات لجميع طلاب الحلقة.
  2.  **الاستجابة الإشرافية (Supervisory Responsiveness):** يُقاس بتقييم دوري من المشرف (جدول `school_managers` أو تقييمات خاصة) لمدى استجابة المعلم للتنبيهات والملاحظات الإدارية.
- **القيمة التحليلية:** يوفر هذا المخطط **مؤشراً إدارياً** لتقييم كفاءة المعلم من الناحية الإجرائية والإدارية، وهو عامل حاسم في جودة العملية التعليمية.

### 7. مخطط عدد الحفاظ (Number of Graduates Chart)

- **نوع المخطط:** مخطط أعمدة (Bar Chart).
- **المحور السيني (X-Axis):** يمثل **السنوات** (Years)، وتتوزع بالتساوي كأعمدة.
- **المحور الصادي (Y-Axis):** يمثل **العدد الكلي** (Total Count) للطلاب الذين أتموا حفظ المصحف كاملاً.
- **مصدر البيانات:** يتطلب هذا المخطط تحديد حالة "إتمام الحفظ" في سجلات الطلاب (جدول `students` أو `achievements` و `certificates`) وتجميعها حسب سنة التخرج.
- **القيمة التحليلية:** يُعد هذا المخطط **مؤشراً استراتيجياً** لنجاح الحلقة على المدى الطويل وقدرتها على تحقيق الهدف النهائي للنظام.

---

## ثالثاً: مخططات الأداء على مستوى المدرسة/المنظمة (School-Level Performance Charts)

تُستخدم هذه المخططات لتقييم النمو المؤسسي والأداء الكلي للمنظمة.

### 8. مخططات النمو المؤسسي (Institutional Growth Charts)

- **نوع المخطط:** مخطط خطي (Line Chart) أو مخطط مساحي (Area Chart) لتمثيل النمو التراكمي.
- **المحور السيني (X-Axis):** يمثل **الزمن** (Time Series).
- **المحور الصادي (Y-Axis):** يمثل **العدد التراكمي** (Cumulative Count).
- **المخططات الفرعية:**
  - **نمو الحلقات:** العدد التراكمي للحلقات النشطة (جدول `halaqahs`).
  - **نمو الطلاب:** العدد التراكمي للطلاب المسجلين (جدول `students` أو `users` بدور `student`).
  - **نمو المعلمين:** العدد التراكمي للمعلمين (جدول `teachers` أو `users` بدور `teacher`).
- **القيمة التحليلية:** توفر هذه المخططات **رؤية استراتيجية** لمعدلات التوسع المؤسسي وتوزيع الموارد البشرية والتعليمية.

### 9. مخططات الأداء المجمعة للمدرسة (Aggregated School Performance Charts)

- **المخططات (2، 3، 4):** يتم تطبيق نفس المنهجية التحليلية للمخططات (2، 3، 4) الخاصة بالطالب، ولكن يتم استبدال البيانات الفردية بـ **المتوسط الحسابي** (`Arithmetic Mean`) لأداء جميع الحلقات في المدرسة.
- **القيمة التحليلية:** تتيح هذه المتوسطات **قياس الكفاءة الكلية** للمدرسة وتحديد المجالات التي تحتاج إلى تحسين على مستوى الإدارة العليا.

### 10. مخطط تقييم كفاءة المدرسة وترتيبها (School Efficiency and Ranking Chart)

- **نوع المخطط:** مخطط راداري (Radar Chart) أو مخطط أعمدة مجمعة (Grouped Bar Chart) للمقارنة بين المدارس.
- **المحور:** يمثل **مؤشرات الكفاءة الرئيسية** (Key Efficiency Indicators - KEIs)، والتي يمكن أن تشمل:
  - متوسط مؤشر الأداء العام المركب للطلاب.
  - متوسط مؤشر التزام المعلمين.
  - نسبة إتمام الحفظ السنوية.
  - نسبة الالتزام بالخطة.
- **القيمة التحليلية:** يوفر هذا المخطط **أداة للمقارنة المعيارية** (`Benchmarking`) بين المدارس المختلفة ضمن المنظمة، مما يحفز المنافسة الإيجابية ويساعد في تحديد أفضل الممارسات.

### 11. مخطط تقييم المقالات وأخبار المدرسة (School Content and News Assessment Chart)

- **نوع المخطط:** مخطط خطي (Line Chart) أو مخطط دائري (Pie Chart) حسب البعد المراد قياسه.
- **المحور:** يعتمد على نوع البيانات المراد قياسها من جداول مثل `contact_messages`، `faqs`، أو أي جدول مخصص للمحتوى (يُفترض وجود جدول للمقالات/الأخبار).
- **منهجية القياس المقترحة:**
  - **معدل التفاعل:** (عدد المشاهدات، الإعجابات، التعليقات) على المقالات بمرور الزمن.
  - **توزيع المحتوى:** (مخطط دائري) يوضح نسبة المقالات المصنفة حسب الموضوع (جدول `contact_categories` أو تصنيفات المحتوى).
- **القيمة التحليلية:** يقيس هذا المخطط **مدى فعالية التواصل الخارجي** للمدرسة وتأثير المحتوى المنشور على الجمهور المستهدف.

---

## الخلاصة التقنية

تتطلب المخططات المقترحة، خاصة المخططات المركبة (4 و 6)، عمليات **تجميع بيانات متقدمة** (`Advanced Data Aggregation`) و **هندسة ميزات** (`Feature Engineering`) لإنشاء المؤشرات المركبة. كما أن طبيعة النظام الموزع (محلي/مركزي) تستلزم وجود **آلية مزامنة قوية** لضمان أن جميع البيانات المستخدمة في التحليل هي بيانات **متسقة** و **حديثة**، وهو ما يتم دعمه بالجداول المخصصة للمزامنة مثل `sync_metadata` و `pending_operations`. يمثل هذا النظام البياني إطاراً شاملاً لـ **إدارة الأداء القائمة على البيانات** (`Data-Driven Performance Management`) في البيئة التعليمية القرآنية.
